<script>
      function call_kyle(type, out_text){
        console.log("sye_print: " + out_text);
        if (type == 1){
          kyle1(out_text);
        }
        if (type == 2){
          kyle2(out_text);
        }
      }

      
      async function call_aws(type, author_name, in_txt, key, end_point){
        const chunk_size = '128';
        var myHeaders = new Headers();
        myHeaders.append("x-api-key", key);
        myHeaders.append("Content-Type", "application/json");
        in_txt = in_txt.replace(/\n/g, "  ");
        console.log("SYE-in_txt: " + in_txt);

        //var raw = JSON.stringify({"in_txt":in_txt,"author_name":author_name,"stage":"test"});
        var raw = JSON.stringify({"in_txt":in_txt,"author_name":author_name,"stage":"prod"});
        console.log("DEBUG: ");
        console.log(raw);
        
        var requestOptions = {
          method: 'POST',
          headers: myHeaders,
          body: raw,
          redirect: 'follow'
        };

        var out_val = "HI";
        if (debug == 1){
          var url = "https://raw.githubusercontent.com/Stanley-Ye/W210/main/visualization/static/data/scatter.json";
          if (type == 1){
            url = "https://raw.githubusercontent.com/Stanley-Ye/W210/main/visualization/static/data/scatter.json";
          }
          console.log("SYE-URL: " + url);

          await fetch(url)
          .then(response => response.text())
          .then(result => out_val = result)
          .catch(error => console.log('error', error));
        } else {
          await fetch(end_point + "?chunk_size=" + chunk_size, requestOptions)
          .then(response => response.text())
          .then(result => out_val = result)
          .catch(error => console.log('error', error));
        }

        console.log("SYE-aws_out_txt: " + out_val);
        call_kyle(type, JSON.parse(out_val));
      }


      async function call_aws_test(type, author_name, in_txt, key, end_point){
        const chunk_size = '128';
        var myHeaders = new Headers();
        myHeaders.append("x-api-key", key);
        myHeaders.append("Content-Type", "application/json");
        in_txt = in_txt.replace(/\n/g, "  ");
        console.log("SYE-in_txt: " + in_txt);

        //var raw = JSON.stringify({"in_txt":in_txt,"author_name":author_name,"stage":"test"});
        var raw = JSON.stringify({"in_txt":in_txt,"keep_pos":["PUNCT","CCONJ"],"stage":"prod"});
        console.log("DEBUG-0: ");
        console.log(raw);
        
        var requestOptions = {
          method: 'POST',
          headers: myHeaders,
          body: raw,
          redirect: 'follow'
        };

        var out_val = "HI";
        if (debug == 1){
          var url = "https://raw.githubusercontent.com/Stanley-Ye/W210/main/visualization/static/data/scatter.json";
          if (type == 1){
            url = "https://raw.githubusercontent.com/Stanley-Ye/W210/main/visualization/static/data/scatter.json";
          }
          console.log("SYE-URL: " + url);

          await fetch(url)
          .then(response => response.text())
          .then(result => out_val = result)
          .catch(error => console.log('error', error));
        } else {
          await fetch(end_point + "?chunk_size=" + chunk_size, requestOptions)
          .then(response => response.text())
          .then(result => out_val = result)
          .catch(error => console.log('error', error));
        }

        console.log("SYE-aws_out_txt_test: " + out_val);
        return out_val;
      }
</script>